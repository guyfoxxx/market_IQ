export const MINIAPP_HTML = "<!doctype html>\n<html lang=\"fa\" dir=\"rtl\">\n<head>\n  <meta charset=\"utf-8\" />\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n  <title>Market IQ</title>\n  <style>\n    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 0; background:#0b1220; color:#e9eef9; }\n    header { padding: 14px 16px; background:#111a2e; border-bottom:1px solid #223055; position: sticky; top: 0; }\n    header h1 { margin:0; font-size: 16px; }\n    main { padding: 16px; max-width: 860px; margin: 0 auto; }\n    .tabs { display:flex; gap:10px; margin-bottom: 12px; flex-wrap: wrap; }\n    .tab { padding: 8px 10px; border-radius: 999px; border:1px solid #223055; background:#111a2e; cursor:pointer; }\n    .tab.active { background:#3b82f6; border-color:#3b82f6; }\n    .card { background:#111a2e; border:1px solid #223055; border-radius:14px; padding: 14px; margin-bottom: 12px; }\n    input, select, textarea { width:100%; padding: 10px 12px; border-radius:10px; border:1px solid #2a3b68; background:#0b1220; color:#e9eef9; }\n    button { padding: 10px 12px; border: 0; border-radius: 10px; background:#3b82f6; color:white; cursor:pointer; }\n    .row { display:grid; grid-template-columns: 1fr 1fr; gap: 12px; }\n    pre { white-space: pre-wrap; background:#0b1220; border:1px solid #223055; padding:10px; border-radius:10px; }\n    a { color: #93c5fd; }\n    .banner { border: 1px dashed #3b82f6; background: rgba(59,130,246,0.12); padding: 12px; border-radius: 14px; margin-bottom: 12px; display:none;}\n  </style>\n  <script src=\"https://telegram.org/js/telegram-web-app.js\"></script>\n</head>\n<body>\n<header><h1>Mini App</h1></header>\n<main>\n  <div id=\"banner\" class=\"banner\">\n    <div id=\"bannerText\"></div>\n    <a id=\"bannerLink\" href=\"#\" target=\"_blank\" rel=\"noreferrer\">\u0628\u0627\u0632 \u06a9\u0631\u062f\u0646</a>\n  </div>\n\n  <div class=\"tabs\">\n    <div class=\"tab active\" data-tab=\"dash\" onclick=\"switchTab('dash')\">\u062f\u0627\u0634\u0628\u0648\u0631\u062f</div>\n    <div class=\"tab\" data-tab=\"analyze\" onclick=\"switchTab('analyze')\">\u062a\u062d\u0644\u06cc\u0644</div>\n    <div class=\"tab\" data-tab=\"settings\" onclick=\"switchTab('settings')\">\u062a\u0646\u0638\u06cc\u0645\u0627\u062a</div>\n    <div class=\"tab\" data-tab=\"wallet\" onclick=\"switchTab('wallet')\">\u06a9\u06cc\u0641 \u067e\u0648\u0644</div>\n  </div>\n\n  <section id=\"dash\" class=\"card\"></section>\n\n  <section id=\"analyze\" class=\"card\" style=\"display:none;\">\n    <div class=\"row\">\n      <div>\n        <label>Market</label>\n        <select id=\"mkt\">\n          <option value=\"crypto\">Crypto</option>\n          <option value=\"forex\">Forex</option>\n          <option value=\"metals\">Metals</option>\n          <option value=\"stocks\">Stocks</option>\n        </select>\n      </div>\n      <div>\n        <label>Symbol</label>\n        <input id=\"sym\" placeholder=\"BTCUSDT / EUR/USD / XAUUSD / AAPL\" />\n      </div>\n    </div>\n    <button onclick=\"runAnalysis()\">\u0627\u062c\u0631\u0627\u06cc \u062a\u062d\u0644\u06cc\u0644</button>\n    <pre id=\"an_out\"></pre>\n  </section>\n\n  <section id=\"settings\" class=\"card\" style=\"display:none;\">\n    <div class=\"row\">\n      <div>\n        <label>Timeframe</label>\n        <select id=\"tf\">\n          <option>H1</option><option selected>H4</option><option>D1</option><option>W1</option>\n        </select>\n      </div>\n      <div>\n        <label>Risk</label>\n        <select id=\"risk\">\n          <option value=\"low\">\u06a9\u0645</option><option value=\"medium\" selected>\u0645\u062a\u0648\u0633\u0637</option><option value=\"high\">\u0632\u06cc\u0627\u062f</option>\n        </select>\n      </div>\n    </div>\n    <label>Style</label>\n    <select id=\"style\">\n      <option value=\"ict\" selected>ICT</option>\n      <option value=\"rtm\">RTM</option>\n      <option value=\"price_action\">\u067e\u0631\u0627\u06cc\u0633 \u0627\u06a9\u0634\u0646</option>\n      <option value=\"general_prompt\">\u067e\u0631\u0627\u0645\u067e\u062a \u0639\u0645\u0648\u0645\u06cc</option>\n      <option value=\"custom_prompt\">\u067e\u0631\u0627\u0645\u067e\u062a \u0627\u062e\u062a\u0635\u0627\u0635\u06cc</option>\n    </select>\n    <label>News</label>\n    <select id=\"news\"><option value=\"false\" selected>\u062e\u0627\u0645\u0648\u0634</option><option value=\"true\">\u0631\u0648\u0634\u0646</option></select>\n    <button onclick=\"saveSettings()\">\u0630\u062e\u06cc\u0631\u0647</button>\n    <pre id=\"set_out\"></pre>\n  </section>\n\n  <section id=\"wallet\" class=\"card\" style=\"display:none;\">\n    <div id=\"walletPublic\"></div>\n    <label>\u0622\u062f\u0631\u0633 \u0628\u0631\u062f\u0627\u0634\u062a BEP20</label>\n    <input id=\"bep20\" placeholder=\"0x...\" />\n    <button onclick=\"saveBep20()\">\u0630\u062e\u06cc\u0631\u0647 BEP20</button>\n    <div style=\"height:12px\"></div>\n    <button onclick=\"requestDeposit()\">\u062f\u0631\u062e\u0648\u0627\u0633\u062a \u0648\u0627\u0631\u06cc\u0632</button>\n    <button onclick=\"requestWithdraw()\" style=\"margin-right:8px\">\u062f\u0631\u062e\u0648\u0627\u0633\u062a \u0628\u0631\u062f\u0627\u0634\u062a</button>\n    <pre id=\"w_out\"></pre>\n  </section>\n</main>\n\n<script>\nconst tg = window.Telegram?.WebApp;\nif (tg) { tg.ready(); tg.expand(); }\n\nfunction getInitData() {\n  return (tg && tg.initData) ? tg.initData : '';\n}\n\nasync function api(path, body) {\n  const res = await fetch('/api' + path, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({ initData: getInitData(), ...body }),\n  });\n  return await res.json();\n}\n\nfunction switchTab(id) {\n  for (const el of document.querySelectorAll('section')) el.style.display = 'none';\n  document.getElementById(id).style.display = '';\n  for (const t of document.querySelectorAll('.tab')) t.classList.remove('active');\n  document.querySelector(`.tab[data-tab=\"${id}\"]`).classList.add('active');\n}\n\nasync function loadDash() {\n  const out = await api('/profile', {});\n  document.getElementById('dash').innerHTML = `\n    <h3>\u067e\u0631\u0648\u0641\u0627\u06cc\u0644</h3>\n    <pre>${JSON.stringify(out, null, 2)}</pre>\n    <small>\u0627\u06af\u0631 initData \u0646\u062f\u0627\u0631\u06cc\u062f\u060c \u0627\u06cc\u0646 \u0635\u0641\u062d\u0647 \u0628\u0627\u06cc\u062f \u062f\u0627\u062e\u0644 Telegram WebApp \u0628\u0627\u0632 \u0634\u0648\u062f.</small>\n  `;\n}\n\nasync function loadBanner() {\n  const out = await api('/banner', {});\n  const b = out.banner;\n  const el = document.getElementById('banner');\n  if (b && b.enabled) {\n    el.style.display = '';\n    document.getElementById('bannerText').textContent = b.text || '';\n    const link = document.getElementById('bannerLink');\n    link.href = b.url || '#';\n  } else {\n    el.style.display = 'none';\n  }\n}\n\nasync function runAnalysis() {\n  const market = document.getElementById('mkt').value;\n  const symbol = document.getElementById('sym').value;\n  const out = await api('/analyze', { market, symbol });\n  document.getElementById('an_out').textContent = JSON.stringify(out, null, 2);\n}\n\nasync function saveSettings() {\n  const out = await api('/settings', {\n    timeframe: document.getElementById('tf').value,\n    risk: document.getElementById('risk').value,\n    style: document.getElementById('style').value,\n    news: document.getElementById('news').value === 'true',\n  });\n  document.getElementById('set_out').textContent = JSON.stringify(out, null, 2);\n}\n\nasync function saveBep20() {\n  const bep20 = document.getElementById('bep20').value;\n  const out = await api('/wallet/bep20', { bep20 });\n  document.getElementById('w_out').textContent = JSON.stringify(out, null, 2);\n}\n\nasync function requestDeposit() {\n  const out = await api('/wallet/request', { kind: 'deposit' });\n  document.getElementById('w_out').textContent = JSON.stringify(out, null, 2);\n}\nasync function requestWithdraw() {\n  const out = await api('/wallet/request', { kind: 'withdraw' });\n  document.getElementById('w_out').textContent = JSON.stringify(out, null, 2);\n}\n\n(async () => {\n  await loadBanner();\n  await loadDash();\n  const pub = await api('/wallet/public', {});\n  document.getElementById('walletPublic').innerHTML = `<h3>\u0648\u0644\u062a \u0639\u0645\u0648\u0645\u06cc</h3><pre>${JSON.stringify(pub, null, 2)}</pre>`;\n})();\n</script>\n</body>\n</html>\n";
