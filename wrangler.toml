name = "marketiq-worker"
main = "marketiq_worker.js"
compatibility_date = "2026-02-03"
workers_dev = true

# Cron برای ارسال خودکار پرامپت اختصاصی (هر 5 دقیقه)
[triggers]
crons = ["*/5 * * * *"]

[[kv_namespaces]]
binding = "BOT_KV"
id = "1d5bfc131118417ab453e9da3501fa5b"

[vars]
# مهم: TELEGRAM_BOT_TOKEN را به صورت Secret ست کنید (wrangler secret put TELEGRAM_BOT_TOKEN)

# یوزرنیم بات بدون @ (برای ساخت لینک رفرال)
BOT_USERNAME = "YourBotUsername"

# مسیر وبهوک: https://<domain>/telegram/<secret>
TELEGRAM_WEBHOOK_SECRET = "vfrq"

# منطقه زمانی برای ریست سهمیه و نمایش تاریخ
TIMEZONE = "Europe/Istanbul"

# Owner/Admin (ID عددی تلگرام)
OWNER_ID = "7411159758"
# می‌توانید چند Owner/Admin تعریف کنید
OWNER_IDS = ""
OWNER_HANDLES = ""
ADMIN_IDS = ""
ADMIN_HANDLES = ""

# کانال/چت‌های ادمین برای دریافت درخواست‌ها (comma-separated chat IDs)
ADMIN_CHAT_IDS = ""

# --- AI Providers ---
# حداقل یکی از این کلیدها را ست کنید:
# OPENAI_API_KEY = "..."
# GEMINI_API_KEY = "..."
# (اختیاری) مدل‌ها
# OPENAI_TEXT_MODEL = "gpt-4o-mini"
# GEMINI_TEXT_MODEL = "gemini-1.5-flash"
# OPENAI_VISION_MODEL = "gpt-4o-mini"
# GEMINI_VISION_MODEL = "gemini-1.5-flash"

# --- Market Data Providers (Optional but recommended for chart accuracy) ---
# TWELVEDATA_API_KEY = "..."
# ALPHAVANTAGE_API_KEY = "..."
# FINNHUB_API_KEY = "..."
# BINANCE_API_KEY = "..."   # optional

# --- News (Optional) ---
# NEWSDATA_API_KEY = "..."

# --- Chart rendering (Optional) ---
# QUICKCHART_API_KEY = "..."

# --- Limits (Optional) ---
FREE_DAILY_LIMIT = "50"
SUB_DAILY_LIMIT = "300"
MONTHLY_LIMIT = "500"

# --- Referral / rewards (Optional) ---
REF_COMMISSION_STEP_PCT = "4"
REF_COMMISSION_MAX_PCT = "20"
REF_POINTS_PER_SUCCESS = "6"
REF_POINTS_FOR_FREE_SUB = "500"
FREE_SUB_DAYS_PER_REDEEM = "30"
